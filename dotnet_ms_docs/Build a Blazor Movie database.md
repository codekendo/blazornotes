
# Build a Blazor movie database app (Overview)

- Article
- 09/04/2024

## In this article

1. [Secure authentication flow required for production apps](https://learn.microsoft.com/en-us/aspnet/core/blazor/tutorials/movie-database-app/?view=aspnetcore-8.0#secure-authentication-flow-required-for-production-apps)
2. [Sample app](https://learn.microsoft.com/en-us/aspnet/core/blazor/tutorials/movie-database-app/?view=aspnetcore-8.0#sample-app)
3. [Article code examples](https://learn.microsoft.com/en-us/aspnet/core/blazor/tutorials/movie-database-app/?view=aspnetcore-8.0#article-code-examples)
4. [Report a tutorial issue](https://learn.microsoft.com/en-us/aspnet/core/blazor/tutorials/movie-database-app/?view=aspnetcore-8.0#report-a-tutorial-issue)

This tutorial explains the basics of building a Blazor Web App with a database, Entity Framework (EF) Core, and user interactivity.

Parts of this series include:

1. [Create a Blazor Web App](https://learn.microsoft.com/en-us/aspnet/core/blazor/tutorials/movie-database-app/part-1?view=aspnetcore-8.0)
2. [Add and scaffold a model](https://learn.microsoft.com/en-us/aspnet/core/blazor/tutorials/movie-database-app/part-2?view=aspnetcore-8.0)
3. [Learn about Razor components](https://learn.microsoft.com/en-us/aspnet/core/blazor/tutorials/movie-database-app/part-3?view=aspnetcore-8.0)
4. [Work with a database](https://learn.microsoft.com/en-us/aspnet/core/blazor/tutorials/movie-database-app/part-4?view=aspnetcore-8.0)
5. [Add validation](https://learn.microsoft.com/en-us/aspnet/core/blazor/tutorials/movie-database-app/part-5?view=aspnetcore-8.0)
6. [Add search](https://learn.microsoft.com/en-us/aspnet/core/blazor/tutorials/movie-database-app/part-6?view=aspnetcore-8.0)
7. [Add a new field](https://learn.microsoft.com/en-us/aspnet/core/blazor/tutorials/movie-database-app/part-7?view=aspnetcore-8.0)
8. [Add interactivity](https://learn.microsoft.com/en-us/aspnet/core/blazor/tutorials/movie-database-app/part-8?view=aspnetcore-8.0)

At the end of the tutorial, you'll have a Blazor Web App that can display and manage movies in a movie database.

[](https://learn.microsoft.com/en-us/aspnet/core/blazor/tutorials/movie-database-app/?view=aspnetcore-8.0#secure-authentication-flow-required-for-production-apps)

## Secure authentication flow required for production apps

This tutorial uses a local database that doesn't require user authentication. Production apps should use the most secure authentication flow available. For more information on authentication for deployed test and production Blazor Web Apps, see the following resources:

- [ASP.NET Core Blazor authentication and authorization](https://learn.microsoft.com/en-us/aspnet/core/blazor/security/?view=aspnetcore-8.0)
- [Secure ASP.NET Core server-side Blazor apps](https://learn.microsoft.com/en-us/aspnet/core/blazor/security/server/?view=aspnetcore-8.0) and the following articles in the _Server_ security node
- [Secure an ASP.NET Core Blazor Web App with OpenID Connect (OIDC)](https://learn.microsoft.com/en-us/aspnet/core/blazor/security/blazor-web-app-with-oidc?view=aspnetcore-8.0)

For Microsoft Azure services, we recommend using _managed identities_. Managed identities securely authenticate to Azure services without storing credentials in app code. For more information, see the following resources:

- [What are managed identities for Azure resources? (Microsoft Entra documentation)](https://learn.microsoft.com/en-us/entra/identity/managed-identities-azure-resources/overview)
- Azure services documentation
    - [Managed identities in Microsoft Entra for Azure SQL](https://learn.microsoft.com/en-us/azure/azure-sql/database/authentication-azure-ad-user-assigned-managed-identity)
    - [How to use managed identities for App Service and Azure Functions](https://learn.microsoft.com/en-us/azure/app-service/overview-managed-identity)

[](https://learn.microsoft.com/en-us/aspnet/core/blazor/tutorials/movie-database-app/?view=aspnetcore-8.0#sample-app)

## Sample app

If you don't intend to create the demonstration app while reading the article, you can refer to the completed sample app in the [Blazor samples GitHub repository (`dotnet/blazor-samples`)](https://github.com/dotnet/blazor-samples). Select the latest version folder in the repository. The sample folder for this tutorial's project is named `BlazorWebAppMovies`.

[](https://learn.microsoft.com/en-us/aspnet/core/blazor/tutorials/movie-database-app/?view=aspnetcore-8.0#article-code-examples)

## Article code examples

The line breaks of code examples shown in the ASP.NET Core documentation often don't match line breaks in scaffolded code generated by tooling for an app. This is due to an article publishing limitation. Lines of code in articles are generally limited to 85 characters in length, and we manually adjust the line length using line breaks to satisfy our publishing guidelines.

As you work through this tutorial or use any other ASP.NET Core article's code examples, you never need to adjust scaffolded code in your app to match the line breaks displayed in article code examples.

[](https://learn.microsoft.com/en-us/aspnet/core/blazor/tutorials/movie-database-app/?view=aspnetcore-8.0#report-a-tutorial-issue)

## Report a tutorial issue

To open a documentation GitHub issue for an article of the series, use the **Open a documentation issue** link at the bottom of the article. Using the link to create your issue adds important tracking metadata to the issue and automatically pings the author of the article.

[](https://learn.microsoft.com/en-us/aspnet/core/blazor/tutorials/movie-database-app/?view=aspnetcore-8.0#support-requests)

## Support requests

We welcome feedback on the tutorial's articles, such as bug reports and comments on the article's text, but we're often unable to provide product support. If you run into a problem while following the tutorial, don't immediately open a documentation issue. Check the steps that you've taken against the article and compare your code to the [sample app](https://learn.microsoft.com/en-us/aspnet/core/blazor/tutorials/movie-database-app/?view=aspnetcore-8.0#sample-app) before opening an issue because many problems can be traced to missing a step or not following a step correctly.

For general questions about .NET and Blazor beyond the tutorial and reference documentation or to obtain assistance from the .NET community, converse with developers in [public forums](https://learn.microsoft.com/en-us/aspnet/core/blazor/fundamentals/?view=aspnetcore-8.0#support-requests).

---


# Build a Blazor movie database app (Part 1 - Create a Blazor Web App)

- Article
- 10/08/2024

Select your tooling

## In this article

1. [Prerequisites](https://learn.microsoft.com/en-us/aspnet/core/blazor/tutorials/movie-database-app/part-1?view=aspnetcore-8.0&pivots=vs#prerequisites)
2. [Create a Blazor Web App](https://learn.microsoft.com/en-us/aspnet/core/blazor/tutorials/movie-database-app/part-1?view=aspnetcore-8.0&pivots=vs#create-a-blazor-web-app)
3. [Run the app](https://learn.microsoft.com/en-us/aspnet/core/blazor/tutorials/movie-database-app/part-1?view=aspnetcore-8.0&pivots=vs#run-the-app)
4. [Stop the app](https://learn.microsoft.com/en-us/aspnet/core/blazor/tutorials/movie-database-app/part-1?view=aspnetcore-8.0&pivots=vs#stop-the-app)

This article is the first part of the Blazor movie database app tutorial that teaches you the basics of building an ASP.NET Core Blazor Web App with features to manage a movie database.

This part of the tutorial series covers how to create a Blazor Web App that adopts static server-side rendering (static SSR). Static SSR means that content is rendered on the server and sent to the client for display in response to individual requests.

[](https://learn.microsoft.com/en-us/aspnet/core/blazor/tutorials/movie-database-app/part-1?view=aspnetcore-8.0&pivots=vs#prerequisites)

## Prerequisites

[Visual Studio (latest release)](https://visualstudio.microsoft.com/downloads/?utm_medium=microsoft&utm_source=learn.microsoft.com&utm_campaign=inline+link&utm_content=download+vs2022) with the **ASP.NET and web development** workload

[](https://learn.microsoft.com/en-us/aspnet/core/blazor/tutorials/movie-database-app/part-1?view=aspnetcore-8.0&pivots=vs#create-a-blazor-web-app)

## Create a Blazor Web App

In Visual Studio:

- Select **Create a new project** from the **Start Window** or select **File** > **New** > **Project** from the menu bar.
    
- In the **Create a new project** dialog, select **Blazor Web App** from the list of project templates. Select the **Next** button.
    
- In the **Configure your new project** dialog, name the project `BlazorWebAppMovies` in the **Project name** field, including matching the capitalization. Using this exact project name is important to ensure that the namespaces match for code that you copy from the tutorial into the app that you're building.
    
- Confirm that the **Location** for the app is suitable. Set the **Place solution and project in the same directory** checkbox to match your preferred solution file location. Select the **Next** button.
    

- In the **Additional information** dialog, use the following settings:
    
    - **Framework**: Select **.NET 8.0 (Long Term Support)**.
    - **Authentication type**: **None**
    - **Configure for HTTPS**: Selected
    - **Interactive render mode**: **Server**
    - **Interactivity location**: **Per page/component**
    - **Include sample pages**: Selected
    - **Do not use top-level statements**: Not selected
    - Select **Create**.

The Visual Studio instructions in parts of this tutorial series use EF Core commands to add database migrations and update the database. EF Core commands are issued using [Visual Studio Connected Services](https://learn.microsoft.com/en-us/visualstudio/azure/overview-connected-services). More information is provided later in this tutorial series.

[](https://learn.microsoft.com/en-us/aspnet/core/blazor/tutorials/movie-database-app/part-1?view=aspnetcore-8.0&pivots=vs#run-the-app)

## Run the app

Press F5 on the keyboard to run the app.

Visual Studio displays the following dialog when a project isn't configured to use SSL:

![Trust self-signed certificate dialog](https://learn.microsoft.com/en-us/aspnet/core/blazor/tutorials/movie-database-app/part-1/_static/trust-certificate.png?view=aspnetcore-8.0)

Select **Yes** if you trust the ASP.NET Core SSL certificate.

The following dialog is displayed:

![Security warning dialog](https://learn.microsoft.com/en-us/aspnet/core/blazor/tutorials/movie-database-app/part-1/_static/install-certificate.png?view=aspnetcore-8.0)

Select **Yes** to acknowledge the risk and install the certificate.

Visual Studio:

- Compiles and runs the app.
- Launches the default browser at `https://localhost:{PORT}`, which displays the app's UI. The `{PORT}` placeholder is the random port assigned to the app when the app is created. If you need to change the port due to a local port conflict, change the port in the project's `Properties/launchSettings.json` file.

Navigate the pages of the app to confirm that the app is working normally.

[](https://learn.microsoft.com/en-us/aspnet/core/blazor/tutorials/movie-database-app/part-1?view=aspnetcore-8.0&pivots=vs#stop-the-app)

## Stop the app

Stop the app using either of the following approaches:

- Close the browser window.
- In Visual Studio, either:
    - Use the Stop button in Visual Studio's menu bar:
        
        ![Stop button in Visual Studio's menu bar](https://learn.microsoft.com/en-us/aspnet/core/blazor/tutorials/movie-database-app/part-1/_static/stop-button.png?view=aspnetcore-8.0)
        
    - Press Shift+F5 on the keyboard.
        

[](https://learn.microsoft.com/en-us/aspnet/core/blazor/tutorials/movie-database-app/part-1?view=aspnetcore-8.0&pivots=vs#examine-the-project-files)

## Examine the project files

The following sections contain an overview of the project's folders and files.

If you're building the app, you don't need to make changes to the project files in the following sections. As you read the descriptions of the folders and files, examine them in the project.

If you're only reading the articles and not building the app, you can refer to the completed sample app in the [Blazor samples GitHub repository (`dotnet/blazor-samples`)](https://github.com/dotnet/blazor-samples). Select the latest version folder in the repository. The sample folder for this tutorial's project is named `BlazorWebAppMovies`. The sample app is the _finished version_ of the app after following all of the steps of the tutorial series. Code in the sample doesn't always match steps of the tutorial before the end of the series.

[](https://learn.microsoft.com/en-us/aspnet/core/blazor/tutorials/movie-database-app/part-1?view=aspnetcore-8.0&pivots=vs#properties-folder)

### `Properties` folder

The `Properties` folder holds development environment configuration in the `launchSettings.json` file.

[](https://learn.microsoft.com/en-us/aspnet/core/blazor/tutorials/movie-database-app/part-1?view=aspnetcore-8.0&pivots=vs#wwwroot-folder)

### `wwwroot` folder

The `wwwroot` folder contains static assets, such as image, JavaScript (`.js`), and stylesheet (`.css`) files.

[](https://learn.microsoft.com/en-us/aspnet/core/blazor/tutorials/movie-database-app/part-1?view=aspnetcore-8.0&pivots=vs#components-componentspages-and-componentslayout-folders)

### `Components`, `Components/Pages`, and `Components/Layout` folders

These folders contain _Razor components_, often referred to as "components," and supporting files. A component is a self-contained portion of user interface (UI) with optional processing logic. Components can be nested, reused, and shared among projects.

Components are implemented using a combination of C# and HTML markup in [Razor](https://learn.microsoft.com/en-us/aspnet/core/mvc/views/razor?view=aspnetcore-8.0) component files with the `.razor` file extension.

Typically, components that are nested within other components and not directly reachable ("routable") at a URL are placed in the `Components` folder. Components that are routable via a URL are usually placed in the `Components/Pages` folder.

The `Components/Layout` folder contains the following layout components and stylesheets:

- `MainLayout` component (`MainLayout.razor`): The app's main layout component.
- `MainLayout.razor.css`: Stylesheet for the app's main layout.
- `NavMenu` component (`NavMenu.razor`): Implements sidebar navigation. This component uses several `NavLink` components to render navigation links to other Razor components.
- `NavMenu.razor.css`: Stylesheet for the app's navigation menu.

[](https://learn.microsoft.com/en-us/aspnet/core/blazor/tutorials/movie-database-app/part-1?view=aspnetcore-8.0&pivots=vs#components_importsrazor-file)

### `Components/_Imports.razor` file

The `_Imports` file (`_Imports.razor`) includes common _Razor directives_ to include in the app's Razor components. Razor directives are reserved keywords prefixed with `@` that appear in Razor markup and change the way component markup or component elements are compiled or function.

[](https://learn.microsoft.com/en-us/aspnet/core/blazor/tutorials/movie-database-app/part-1?view=aspnetcore-8.0&pivots=vs#componentsapprazor-file)

### `Components/App.razor` file

The `App` component (`App.razor`) is the root component of the app that includes:

- HTML markup.
- The `Routes` component.
- The Blazor script (`<script>` tag for `blazor.web.js`).

The root component is the first component that the app loads.

[](https://learn.microsoft.com/en-us/aspnet/core/blazor/tutorials/movie-database-app/part-1?view=aspnetcore-8.0&pivots=vs#componentsroutesrazor-file)

### `Components/Routes.razor` file

The `Routes` component (`Routes.razor`) sets up routing for the app.

[](https://learn.microsoft.com/en-us/aspnet/core/blazor/tutorials/movie-database-app/part-1?view=aspnetcore-8.0&pivots=vs#appsettingsjson-file)

### `appsettings.json` file

The `appsettings.json` file contains configuration data, such as connection strings.

Warning

Don't store app secrets, connection strings, credentials, passwords, personal identification numbers (PINs), private C#/.NET code, or private keys/tokens in client-side code, which is _**always insecure**_. In test/staging and production environments, server-side Blazor code and web APIs should use secure authentication flows that avoid maintaining credentials within project code or configuration files. Outside of local development testing, we recommend avoiding the use of environment variables to store sensitive data, as environment variables aren't the most secure approach. For local development testing, the [Secret Manager tool](https://learn.microsoft.com/en-us/aspnet/core/security/app-secrets?view=aspnetcore-8.0) is recommended for securing sensitive data. For more information, see [Securely maintain sensitive data and credentials](https://learn.microsoft.com/en-us/aspnet/core/blazor/security/?view=aspnetcore-8.0#securely-maintain-sensitive-data-and-credentials).

[](https://learn.microsoft.com/en-us/aspnet/core/blazor/tutorials/movie-database-app/part-1?view=aspnetcore-8.0&pivots=vs#programcs-file)

### `Program.cs` file

The `Program.cs` file contains code to create the app and configure the request processing pipeline of the app.

The order of the lines in the Blazor Web App project template changes across releases of .NET, so the order of the lines in the `Program.cs` file might not match the order of the lines covered in this section.

A [WebApplicationBuilder](https://learn.microsoft.com/en-us/dotnet/api/microsoft.aspnetcore.builder.webapplicationbuilder) creates the app with preconfigured defaults:

C#

```
var builder = WebApplication.CreateBuilder(args);
```

Razor component services are added to the app by calling [AddRazorComponents](https://learn.microsoft.com/en-us/dotnet/api/microsoft.extensions.dependencyinjection.razorcomponentsservicecollectionextensions.addrazorcomponents), which enables Razor components to render and execute code on the server:

C#

```
builder.Services.AddRazorComponents();
```

The [WebApplication](https://learn.microsoft.com/en-us/dotnet/api/microsoft.aspnetcore.builder.webapplication) (held by the `app` variable in the following code) is built:

C#

```
var app = builder.Build();
```

Next, the HTTP request pipeline is configured.

In the development environment:

- Exception Handler Middleware ([UseExceptionHandler](https://learn.microsoft.com/en-us/dotnet/api/microsoft.aspnetcore.builder.exceptionhandlerextensions.useexceptionhandler)) processes errors and displays a developer exception page during development app runs.
- [HTTP Strict Transport Security Protocol (HSTS) Middleware](https://learn.microsoft.com/en-us/aspnet/core/security/enforcing-ssl?view=aspnetcore-8.0#http-strict-transport-security-protocol-hsts) ([UseHsts](https://learn.microsoft.com/en-us/dotnet/api/microsoft.aspnetcore.builder.hstsbuilderextensions.usehsts)) processes [HSTS](https://cheatsheetseries.owasp.org/cheatsheets/HTTP_Strict_Transport_Security_Cheat_Sheet.html).

C#

```
if (!app.Environment.IsDevelopment())
{
    app.UseExceptionHandler("/Error", createScopeForErrors: true);
    app.UseHsts();
}
```

HTTPS Redirection Middleware ([UseHttpsRedirection](https://learn.microsoft.com/en-us/dotnet/api/microsoft.aspnetcore.builder.httpspolicybuilderextensions.usehttpsredirection)) enforces the HTTPS protocol by redirecting HTTP requests to HTTPS if an HTTPS port is available:

C#

```
app.UseHttpsRedirection();
```

Antiforgery Middleware ([UseAntiforgery](https://learn.microsoft.com/en-us/dotnet/api/microsoft.aspnetcore.builder.antiforgeryapplicationbuilderextensions.useantiforgery)) enforces antiforgery protection for form processing:

C#

```
app.UseAntiforgery();
```

Static File Middleware ([UseStaticFiles](https://learn.microsoft.com/en-us/dotnet/api/microsoft.aspnetcore.builder.staticfileextensions.usestaticfiles)) serves static files, such as images, scripts, and stylesheets from the `wwwroot` folder:

C#

```
app.UseStaticFiles();
```

[MapRazorComponents](https://learn.microsoft.com/en-us/dotnet/api/microsoft.aspnetcore.builder.razorcomponentsendpointroutebuilderextensions.maprazorcomponents) maps components defined in the root `App` component to the given .NET assembly and renders routable components:

C#

```
app.MapRazorComponents<App>();
```

The app is run by calling [Run](https://learn.microsoft.com/en-us/dotnet/api/microsoft.aspnetcore.builder.webapplication.run) on the [WebApplication](https://learn.microsoft.com/en-us/dotnet/api/microsoft.aspnetcore.builder.webapplication) (`app`):

C#

```
app.Run();
```

[](https://learn.microsoft.com/en-us/aspnet/core/blazor/tutorials/movie-database-app/part-1?view=aspnetcore-8.0&pivots=vs#troubleshoot-with-the-completed-sample)

## Troubleshoot with the completed sample

If you run into a problem while following the tutorial that you can't resolve from the text, compare your code to the completed project in the Blazor samples repository:

[Blazor samples GitHub repository (`dotnet/blazor-samples`)](https://github.com/dotnet/blazor-samples)

Select the latest version folder. The sample folder for this tutorial's project is named `BlazorWebAppMovies`.

[](https://learn.microsoft.com/en-us/aspnet/core/blazor/tutorials/movie-database-app/part-1?view=aspnetcore-8.0&pivots=vs#additional-resources)

## Additional resources

When using VS Code or the .NET CLI, this tutorial series adopts insecure HTTP protocol to ease the transition of adopting SSL/HTTPS security for Linux and macOS users. For information on adopting SSL/HTTPS, see [Enforce HTTPS in ASP.NET Core](https://learn.microsoft.com/en-us/aspnet/core/security/enforcing-ssl?view=aspnetcore-8.0).


---

# Build a Blazor movie database app (Part 2 - Add and scaffold a model)

- Article
- 10/08/2024

Select your tooling

## In this article

1. [Add a data model](https://learn.microsoft.com/en-us/aspnet/core/blazor/tutorials/movie-database-app/part-2?view=aspnetcore-8.0&pivots=vs#add-a-data-model)
2. [Scaffold the model](https://learn.microsoft.com/en-us/aspnet/core/blazor/tutorials/movie-database-app/part-2?view=aspnetcore-8.0&pivots=vs#scaffold-the-model)
3. [Files created and updated by scaffolding](https://learn.microsoft.com/en-us/aspnet/core/blazor/tutorials/movie-database-app/part-2?view=aspnetcore-8.0&pivots=vs#files-created-and-updated-by-scaffolding)
4. [Create the initial database schema using EF Core's migration feature](https://learn.microsoft.com/en-us/aspnet/core/blazor/tutorials/movie-database-app/part-2?view=aspnetcore-8.0&pivots=vs#create-the-initial-database-schema-using-ef-cores-migration-feature)

This article is the second part of the Blazor movie database app tutorial that teaches you the basics of building an ASP.NET Core Blazor Web App with features to manage a movie database.

In this part of the tutorial series:

- A class is added to the app representing a movie in a database.
- [Entity Framework Core (EF Core)](https://learn.microsoft.com/en-us/ef/core) services and tooling create a database context and database. EF Core is an object-relational mapper (O/RM) that simplifies data access. You write model classes first, and EF Core creates the database from the model classes, which is called _scaffolding_.
- Additional tooling scaffolds a Razor component-based UI for interacting with the movie records in the database via the database context.

[](https://learn.microsoft.com/en-us/aspnet/core/blazor/tutorials/movie-database-app/part-2?view=aspnetcore-8.0&pivots=vs#add-a-data-model)

## Add a data model

In **Solution Explorer**, right-click the `BlazorWebAppMovies` project and select **Add** > **New Folder**. Name the folder `Models`.

Right-click the `Models` folder. Select **Add** > **Class**. Name the file `Movie.cs`. Use the following contents for the file.

`Models/Movie.cs`:

C#

```
using System.ComponentModel.DataAnnotations;
using System.ComponentModel.DataAnnotations.Schema;

namespace BlazorWebAppMovies.Models;

public class Movie
{
    public int Id { get; set; }

    public string? Title { get; set; }

    public DateOnly ReleaseDate { get; set; }

    public string? Genre { get; set; }

    [DataType(DataType.Currency)]
    [Column(TypeName = "decimal(18, 2)")]
    public decimal Price { get; set; }
}
```

The `Movie` class contains:

- A record identifier property (`Id`), which is required by EF Core and the database to track records. In the database, the `Id` property is the database record's primary key.
- Other properties that describe aspects of a movie:
    - Title (`Title`)
    - Release date (`ReleaseDate`)
    - Genre (`Genre`)
    - Price (`Price`)

The question mark on a `string` type indicates that the property is nullable (it can hold a `null` value).

The EF Core database provider selects data types based on the .NET types of the model's properties. The provider also takes into account other metadata provided by [System.ComponentModel.DataAnnotations](https://learn.microsoft.com/en-us/dotnet/api/system.componentmodel.dataannotations), which are a set of attribute classes placed above a model's property with the following format, where the `{ANNOTATION}` placeholder is the annotation name. You can place multiple annotations on the same line separated by commas inside the brackets, or you can place multiple annotations on separate lines, which is the approach adopted by this tutorial series.

C#

```
[{ANNOTATION}]
```

The `Price` property in the `Movie` class file has two data annotations:

C#

```
[DataType(DataType.Currency)]
[Column(TypeName = "decimal(18, 2)")]
public decimal Price { get; set; }
```

These annotations specify:

- That the property holds a currency data type.
- The database column is a decimal of 18 digits with two decimal places.

More information on data annotations, including adding data annotations for validation, is covered in a later part of the tutorial series.

Select **Build** > **Build Solution** from the menu bar or press F6 on the keyboard. Confirm in the **Output** panel that the build succeeded.

[](https://learn.microsoft.com/en-us/aspnet/core/blazor/tutorials/movie-database-app/part-2?view=aspnetcore-8.0&pivots=vs#scaffold-the-model)

## Scaffold the model

In this section, the `Movie` model is used to _scaffold_ a database context and a UI for managing movies in the database. .NET scaffolding is a code generation framework for .NET applications. You use scaffolding to quickly add database and UI code that interacts with data models.

Right-click on the `Components/Pages` folder and select **Add** > **New Scaffolded Item**:

![New Scaffolded Item](https://learn.microsoft.com/en-us/aspnet/core/blazor/tutorials/movie-database-app/part-2/_static/new-scaffolded-item.png?view=aspnetcore-8.0)

With the **Add New Scaffold Item** dialog open to **Installed** > **Common** > **Blazor** > **Razor Component**, select **Razor Components using Entity Framework (CRUD)**. Select the **Add** button.

_CRUD_ is an acronym for Create, Read, Update, and Delete. The scaffolder produces create, edit, delete, details, and index components for the app.

![Scaffold item](https://learn.microsoft.com/en-us/aspnet/core/blazor/tutorials/movie-database-app/part-2/_static/add-new-scaffolded-item.png?view=aspnetcore-8.0)

Complete the **Add Razor Components using Entity Framework (CRUD)** dialog:

- The **Template** dropdown list includes other templates for specifically creating create, edit, delete, details, and list components. This dropdown list comes in handy when you only need to create a specific type of component scaffolded to a model class. Leave the **Template** dropdown list set to **CRUD** to scaffold a full set of components.
- In the **Model class** dropdown list, select **Movie (BlazorWebAppMovies.Models)**.
- For **DbContext class**, select the **+** (plus sign) button.
- In the **Add Data Context** modal dialog, the class name `BlazorWebAppMovies.Data.BlazorWebAppMoviesContext` is generated. Use the default generated value. Select the **Add** button.
- After the model dialog closes, the **Database provider** dropdown list defaults to **SQL Server**. When you're building apps in the future, you can select the appropriate provider for the database that you're using. The options include SQLite, PostgreSQL, and Azure Cosmos DB. Leave the **Database provider** dropdown list set to **SQL Server**.
- Select **Add**.

![Add Razor components using EF CRUD dialog](https://learn.microsoft.com/en-us/aspnet/core/blazor/tutorials/movie-database-app/part-2/_static/add-razor-components-using-ef-crud.png?view=aspnetcore-8.0)

The `appsettings.json` file is updated with the connection string used to connect to a local database. In the following example, the `{CONNECTION STRING}` is the connection string automatically generated by the scaffolder:

JSON

```
"ConnectionStrings": {
  "BlazorWebAppMoviesContext": "{CONNECTION STRING}"
}
```

Warning

Don't store app secrets, connection strings, credentials, passwords, personal identification numbers (PINs), private C#/.NET code, or private keys/tokens in client-side code, which is _**always insecure**_. In test/staging and production environments, server-side Blazor code and web APIs should use secure authentication flows that avoid maintaining credentials within project code or configuration files. Outside of local development testing, we recommend avoiding the use of environment variables to store sensitive data, as environment variables aren't the most secure approach. For local development testing, the [Secret Manager tool](https://learn.microsoft.com/en-us/aspnet/core/security/app-secrets?view=aspnetcore-8.0) is recommended for securing sensitive data. For more information, see [Securely maintain sensitive data and credentials](https://learn.microsoft.com/en-us/aspnet/core/blazor/security/?view=aspnetcore-8.0#securely-maintain-sensitive-data-and-credentials).

[](https://learn.microsoft.com/en-us/aspnet/core/blazor/tutorials/movie-database-app/part-2?view=aspnetcore-8.0&pivots=vs#files-created-and-updated-by-scaffolding)

## Files created and updated by scaffolding

The scaffolding process creates the following component files and movie database context class file:

- `Components/Pages/MoviePages`
    - `Create.razor`: Creates new movie entities.
    - `Delete.razor`: Deletes a movie entity.
    - `Details.razor`: Shows movie entity details.
    - `Edit.razor`: Updates a movie entity.
    - `Index.razor`: Lists movie entities (records) in the database.
- `Data/BlazorWebAppMoviesContext.cs`: Database context file ([DbContext](https://learn.microsoft.com/en-us/dotnet/api/microsoft.entityframeworkcore.dbcontext)).

The component files in the `MoviePages` folder are described in greater detail in the next part of this tutorial. The database context is described later in this article.

ASP.NET Core is built with dependency injection, which is a software design pattern for achieving [Inversion of Control (IoC)](https://learn.microsoft.com/en-us/dotnet/standard/modern-web-apps-azure-architecture/architectural-principles#dependency-inversion) between classes and their dependencies. Services, such as the EF Core database context, are registered with dependency injection during application startup. These services are injected into Razor components for use by the components.

```
The [`QuickGrid`](https://learn.microsoft.com/en-us/dotnet/api/microsoft.aspnetcore.components.quickgrid) component is a Razor component for efficiently displaying data in tabular form. The scaffolder places a `QuickGrid` component in the `Index` component (`Components/Pages/Index.razor`) to display movie entities. Calling [AddQuickGridEntityFrameworkAdapter](https://learn.microsoft.com/en-us/dotnet/api/microsoft.extensions.dependencyinjection.entityframeworkadapterservicecollectionextensions.addquickgridentityframeworkadapter) on the service collection adds an EF Core adapter for `QuickGrid` to recognize EF Core-supplied [IQueryable<T>](https://learn.microsoft.com/en-us/dotnet/api/system.linq.iqueryable-1) instances and to resolve database queries asynchronously for efficiency.
```

In combination with [UseDeveloperExceptionPage](https://learn.microsoft.com/en-us/dotnet/api/microsoft.aspnetcore.builder.developerexceptionpageextensions.usedeveloperexceptionpage), [AddDatabaseDeveloperPageExceptionFilter](https://learn.microsoft.com/en-us/dotnet/api/microsoft.extensions.dependencyinjection.databasedeveloperpageexceptionfilterserviceextensions.adddatabasedeveloperpageexceptionfilter) captures database-related exceptions that can be resolved by using Entity Framework migrations. When these exceptions occur, an HTML response is generated with details about possible actions to resolve the issue.

The following code is added to the `Program` file by the scaffolder:

C#

```
builder.Services.AddDbContextFactory<BlazorWebAppMoviesContext>(options =>
    options.UseSqlServer(
        builder.Configuration.GetConnectionString("BlazorWebAppMoviesContext") ?? 
        throw new InvalidOperationException(
            "Connection string 'BlazorWebAppMoviesContext' not found.")));

builder.Services.AddQuickGridEntityFrameworkAdapter();

builder.Services.AddDatabaseDeveloperPageExceptionFilter();
```

Static server-side rendering (static SSR) is enabled by calling:

- The service collection extension method [AddRazorComponents](https://learn.microsoft.com/en-us/dotnet/api/microsoft.extensions.dependencyinjection.razorcomponentsservicecollectionextensions.addrazorcomponents) to register services for server-side rendering (SSR) of Razor components.
- The request pipeline extension method [MapRazorComponents](https://learn.microsoft.com/en-us/dotnet/api/microsoft.aspnetcore.builder.razorcomponentsendpointroutebuilderextensions.maprazorcomponents), which maps the page components defined in the `App` component to the given assembly and renders the `App` component when a request matches a route to a component:

C#

```
builder.Services.AddRazorComponents()
    .AddInteractiveServerComponents();

...

app.MapRazorComponents<App>()
    .AddInteractiveServerRenderMode();
```

The extension methods [AddInteractiveServerComponents](https://learn.microsoft.com/en-us/dotnet/api/microsoft.extensions.dependencyinjection.serverrazorcomponentsbuilderextensions.addinteractiveservercomponents) and [AddInteractiveServerRenderMode](https://learn.microsoft.com/en-us/dotnet/api/microsoft.aspnetcore.builder.serverrazorcomponentsendpointconventionbuilderextensions.addinteractiveserverrendermode) make the app capable of adopting interactive SSR, which isn't relevant until the last part of the tutorial series on interactivity. Over the next several articles, the app's components only adopt static SSR.

[](https://learn.microsoft.com/en-us/aspnet/core/blazor/tutorials/movie-database-app/part-2?view=aspnetcore-8.0&pivots=vs#create-the-initial-database-schema-using-ef-cores-migration-feature)

## Create the initial database schema using EF Core's migration feature

The migrations feature in EF Core:

- Creates the initial database schema.
- Incrementally updates the database schema to keep it synchronized with the app's data model. Existing data in the database is preserved.

EF Core adopts the _code-first_ approach for database design and maintenance:

- Entity classes are created and updated first in the app.
- The database is created and updated from the app's entity classes.

This is the reverse procedure of _database-first_ approaches, where the database is designed, built, and updated first. Adopting EF Core's code-first approach speeds up the process of app development because most of the difficult and time-consuming database creation and management procedures are handled transparently by the EF Core tooling, so you can focus on app development.

In this section, [Visual Studio Connected Services](https://learn.microsoft.com/en-us/visualstudio/azure/overview-connected-services) are used to issue EF Core commands that:

- Add an initial migration.
- Update the database using the initial migration.

In **Solution Explorer**, double-click **Connected Services**. In the **SQL Server Express LocalDB** area of **Service Dependencies**, select the ellipsis (`...`) followed by **Add migration**:

![UI showing the 'Add migration' option in the contextual menu opened from selecting the ellipsis next to 'SQL Server Express LocalDB'](https://learn.microsoft.com/en-us/aspnet/core/blazor/tutorials/movie-database-app/part-2/_static/add-migration-menu-item.png?view=aspnetcore-8.0)

Give the migration a **Migration name** of `InitialCreate`, which is a name that describes the migration. Wait for the database context to load in the **DbContext class names** field, which may take a few seconds. Select **Finish** to create the migration:

![Add a new EF migration dialog showing the migration name and database context](https://learn.microsoft.com/en-us/aspnet/core/blazor/tutorials/movie-database-app/part-2/_static/new-ef-migration-dialog.png?view=aspnetcore-8.0)

Select the **Close** button after the operation finishes.

Adding a migration generates code to create the initial database schema. The schema is based on the model specified in [DbContext](https://learn.microsoft.com/en-us/dotnet/api/microsoft.entityframeworkcore.dbcontext).

Select the ellipsis (`...`) again followed by the **Update database** command:

![UI showing the 'Update database' option in the contextual menu opened from selecting the ellipsis next to 'SQL Server Express LocalDB'](https://learn.microsoft.com/en-us/aspnet/core/blazor/tutorials/movie-database-app/part-2/_static/update-database-menu-item.png?view=aspnetcore-8.0)

The **Update database with the latest migration** dialog opens. Wait for the **DbContext class names** field to update and for prior migrations to load, which may take a few seconds. Select the **Finish** button:

![Update database with the latest migration dialog showing the database context](https://learn.microsoft.com/en-us/aspnet/core/blazor/tutorials/movie-database-app/part-2/_static/update-database-dialog.png?view=aspnetcore-8.0)

The update database command executes the `Up` method migrations that haven't been applied in a migration code file created by the scaffolder. In this case, the command executes the `Up` method in the `Migrations/{TIME STAMP}_InitialCreate.cs` file, which creates the database. The `{TIME STAMP}` placeholder is a time stamp.

Select the **Close** button after the operation finishes.

The database context `BlazorWebAppMoviesContext` (`Data/BlazorWebAppMoviesContext.cs`):

- Derives from [Microsoft.EntityFrameworkCore.DbContext](https://learn.microsoft.com/en-us/dotnet/api/microsoft.entityframeworkcore.dbcontext).
- Specifies which entities are included in the data model.
- Coordinates EF Core functionality, such as CRUD operations, for the `Movie` model.
`- Contains a [DbSet<TEntity>](https://learn.microsoft.com/en-us/dotnet/api/microsoft.entityframeworkcore.dbset-1) property for the `Movie` entity set. In EF terminology, an entity set typically corresponds to a database table. An entity corresponds to a row in the table.`

The name of the connection string is passed in to the context by calling a method on a [DbContextOptions](https://learn.microsoft.com/en-us/dotnet/api/microsoft.entityframeworkcore.dbcontextoptions) object. For local development, the connection string is read from the `appsettings.json` file.

Warning

Don't store app secrets, connection strings, credentials, passwords, personal identification numbers (PINs), private C#/.NET code, or private keys/tokens in client-side code, which is _**always insecure**_. In test/staging and production environments, server-side Blazor code and web APIs should use secure authentication flows that avoid maintaining credentials within project code or configuration files. Outside of local development testing, we recommend avoiding the use of environment variables to store sensitive data, as environment variables aren't the most secure approach. For local development testing, the [Secret Manager tool](https://learn.microsoft.com/en-us/aspnet/core/security/app-secrets?view=aspnetcore-8.0) is recommended for securing sensitive data. For more information, see [Securely maintain sensitive data and credentials](https://learn.microsoft.com/en-us/aspnet/core/blazor/security/?view=aspnetcore-8.0#securely-maintain-sensitive-data-and-credentials).

[](https://learn.microsoft.com/en-us/aspnet/core/blazor/tutorials/movie-database-app/part-2?view=aspnetcore-8.0&pivots=vs#test-the-app)

## Test the app

Run the app.

Add `/movies` to the URL in the browser's address bar to navigate to the movies `Index` page.

After the `Index` page loads, select the **Create New** link.

Add a movie to the database. In the following example, the classic sci-fi movie [_The Matrix_](https://www.warnerbros.com/movies/matrix) (©1999 [Warner Bros. Entertainment Inc.](https://www.warnerbros.com/)) is added as the first movie entry. Selecting the **Create** button adds the movie to the database:

![Adding The Matrix movie to the database with the 'Create' component](https://learn.microsoft.com/en-us/aspnet/core/blazor/tutorials/movie-database-app/part-2/_static/create-new.png?view=aspnetcore-8.0)

When you select the **Create** button, the movie data is posted to the server and saved in the database. When the app returns to the `Index` page, the added entity appears:

![The Matrix movie shown in the movies 'Index' page](https://learn.microsoft.com/en-us/aspnet/core/blazor/tutorials/movie-database-app/part-2/_static/movie-added.png?view=aspnetcore-8.0)

Open the `Edit` page. Edit the movie's record and save the changes.

Examine the `Delete` page, but don't delete _The Matrix_ movie from the database. The presence of this movie record is valuable in the next step of the tutorial where rendered HTML is studied and some enhancements are made to the data displayed. If you already deleted the movie, add the movie to the database again using the `Create` page before proceeding to the next part of the tutorial series.

[](https://learn.microsoft.com/en-us/aspnet/core/blazor/tutorials/movie-database-app/part-2?view=aspnetcore-8.0&pivots=vs#stop-the-app)

## Stop the app

Stop the app using either of the following approaches:

- Close the browser window.
- In Visual Studio, either:
    - Use the Stop button in Visual Studio's menu bar:
        
        ![Stop button in Visual Studio's menu bar](https://learn.microsoft.com/en-us/aspnet/core/blazor/tutorials/movie-database-app/part-1/_static/stop-button.png?view=aspnetcore-8.0)
        
    - Press Shift+F5 on the keyboard.
        

[](https://learn.microsoft.com/en-us/aspnet/core/blazor/tutorials/movie-database-app/part-2?view=aspnetcore-8.0&pivots=vs#troubleshoot-with-the-completed-sample)

## Troubleshoot with the completed sample

If you run into a problem while following the tutorial that you can't resolve from the text, compare your code to the completed project in the Blazor samples repository:

[Blazor samples GitHub repository (`dotnet/blazor-samples`)](https://github.com/dotnet/blazor-samples)

Select the latest version folder. The sample folder for this tutorial's project is named `BlazorWebAppMovies`.

[](https://learn.microsoft.com/en-us/aspnet/core/blazor/tutorials/movie-database-app/part-2?view=aspnetcore-8.0&pivots=vs#additional-resources)

## Additional resources

EF Core documentation:

- [Entity Framework Core](https://learn.microsoft.com/en-us/ef/core/)
- [Entity Framework Core tools reference - .NET Core CLI](https://learn.microsoft.com/en-us/ef/core/cli/dotnet)
- [Data Types](https://learn.microsoft.com/en-us/ef/core/modeling/relational/data-types)
- [SaveChangesAsync](https://learn.microsoft.com/en-us/dotnet/api/microsoft.entityframeworkcore.dbcontext.savechangesasync): The API document includes basic information on how entities are saved and change detection.
- [Environment-based `Startup` class and methods](https://learn.microsoft.com/en-us/aspnet/core/fundamentals/environments?view=aspnetcore-8.0#environment-based-startup-class-and-methods)
- [`dotnet aspnet-codegenerator`](https://learn.microsoft.com/en-us/aspnet/core/fundamentals/tools/dotnet-aspnet-codegenerator?view=aspnetcore-8.0)
- [Dependency injection in ASP.NET Core](https://learn.microsoft.com/en-us/aspnet/core/fundamentals/dependency-injection?view=aspnetcore-8.0)
- [ASP.NET Core Blazor QuickGrid component](https://learn.microsoft.com/en-us/aspnet/core/blazor/components/quickgrid?view=aspnetcore-8.0)

[](https://learn.microsoft.com/en-us/aspnet/core/blazor/tutorials/movie-database-app/part-2?view=aspnetcore-8.0&pivots=vs#legal)

## Legal

[_The Matrix_](https://www.warnerbros.com/movies/matrix) is a copyright of [Warner Bros. Entertainment Inc.](https://www.warnerbros.com/).

[](https://learn.microsoft.com/en-us/aspnet/core/blazor/tutorials/movie-database-app/part-2?view=aspnetcore-8.0&pivots=vs#next-steps)


